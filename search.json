[
  {
    "objectID": "OJS/gap-types-definitions.html",
    "href": "OJS/gap-types-definitions.html",
    "title": "Poverty Data Gaps",
    "section": "",
    "text": "types_opts = FileAttachment(\"data/types_opts.csv\").csv({ typed: true })\n\n\n\n\n\n\n\n\nInputs.table(types_opts, {\n  rows: 20\n})"
  },
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Poverty Data Gaps",
    "section": "",
    "text": "viewof sources = {\n  const options = sources_opts.map(d =&gt; d[Object.keys(d)[0]]);\n  const container = document.createElement(\"div\");\n  container.classList.add(\"filter-name\");\n  \n  const label = document.createElement(\"label\");\n  label.textContent = \"Data sources:\";\n  label.style.cssText = \"display: block; margin-bottom: 4px; font-weight: 500;\";\n  \n  const selectedContainer = document.createElement(\"div\");\n  selectedContainer.style.cssText = \"display: flex; flex-wrap: wrap; gap: 6px; min-height: 38px; padding: 6px; border: 1px solid #ccc; border-radius: 4px; margin-bottom: 8px; background: white; align-items: center;\";\n  \n  const buttonWrapper = document.createElement(\"div\");\n  buttonWrapper.style.cssText = \"position: relative; width: 100%;\";\n  \n  const dropdownButton = document.createElement(\"button\");\n  dropdownButton.textContent = \"Select sources...\";\n  dropdownButton.style.cssText = \"width: 100%; padding: 8px 12px; text-align: left; background: white; border: 1px solid #ccc; border-radius: 4px; cursor: pointer; color: #333; display: block;\";\n  \n  const dropdownMenu = document.createElement(\"div\");\n  dropdownMenu.style.cssText = \"display: none; position: fixed; max-height: 200px; overflow-y: auto; background: white; border: 1px solid #ccc; border-radius: 4px; z-index: 1000; box-shadow: 0 2px 8px rgba(0,0,0,0.1); box-sizing: border-box;\";\n  \n  let selected = [];\n  \n  const updateView = () =&gt; {\n    selectedContainer.innerHTML = \"\";\n    selected.forEach(item =&gt; {\n      const tag = document.createElement(\"span\");\n      tag.style.cssText = \"display: inline-flex; align-items: center; gap: 4px; padding: 4px 8px; background: #e3f2fd; border-radius: 3px; font-size: 13px; color: #333;\";\n      tag.innerHTML = `${item} &lt;span style=\"cursor: pointer; font-weight: bold;\"&gt;×&lt;/span&gt;`;\n      tag.querySelector(\"span\").onclick = () =&gt; {\n        selected = selected.filter(s =&gt; s !== item);\n        updateView();\n        container.value = selected;\n        container.dispatchEvent(new CustomEvent(\"input\"));\n      };\n      selectedContainer.appendChild(tag);\n    });\n    \n    if (selected.length === 0) {\n      const placeholder = document.createElement(\"span\");\n      placeholder.textContent = \"No sources selected (showing all data)\";\n      placeholder.style.cssText = \"color: #999; font-style: italic;\";\n      selectedContainer.appendChild(placeholder);\n    }\n  };\n  \n  options.forEach(option =&gt; {\n    const item = document.createElement(\"div\");\n    item.textContent = option;\n    item.style.cssText = \"padding: 8px 12px; cursor: pointer; user-select: none; color: #333;\";\n    item.onmouseenter = () =&gt; item.style.background = \"#f0f0f0\";\n    item.onmouseleave = () =&gt; item.style.background = selected.includes(option) ? \"#e3f2fd\" : \"white\";\n    item.onclick = () =&gt; {\n      if (selected.includes(option)) {\n        selected = selected.filter(s =&gt; s !== option);\n      } else {\n        selected.push(option);\n      }\n      updateView();\n      container.value = selected;\n      container.dispatchEvent(new CustomEvent(\"input\"));\n    };\n    dropdownMenu.appendChild(item);\n  });\n  \n  dropdownButton.onclick = () =&gt; {\n    const isVisible = dropdownMenu.style.display === \"block\";\n    if (isVisible) {\n      dropdownMenu.style.display = \"none\";\n    } else {\n      const rect = dropdownButton.getBoundingClientRect();\n      dropdownMenu.style.top = `${rect.bottom + 2}px`;\n      dropdownMenu.style.left = `${rect.left}px`;\n      dropdownMenu.style.width = `${rect.width}px`;\n      dropdownMenu.style.display = \"block\";\n    }\n  };\n  \n  document.addEventListener(\"click\", (e) =&gt; {\n    if (!container.contains(e.target) && !dropdownMenu.contains(e.target)) {\n      dropdownMenu.style.display = \"none\";\n    }\n  });\n  \n  container.appendChild(label);\n  container.appendChild(selectedContainer);\n  buttonWrapper.appendChild(dropdownButton);\n  container.appendChild(buttonWrapper);\n  document.body.appendChild(dropdownMenu);\n  \n  updateView();\n  container.value = selected;\n  return container;\n}\n\n\n\n\n\n\n\n\n\nviewof types = {\n  const options = types_opts.map(d =&gt; d[Object.keys(d)[0]]);\n  const container = document.createElement(\"div\");\n  container.classList.add(\"filter-name\");\n  \n  const label = document.createElement(\"label\");\n  label.textContent = \"Type of data gap:\";\n  label.style.cssText = \"display: block; margin-bottom: 4px; font-weight: 500;\";\n  \n  const selectedContainer = document.createElement(\"div\");\n  selectedContainer.style.cssText = \"display: flex; flex-wrap: wrap; gap: 6px; min-height: 38px; padding: 6px; border: 1px solid #ccc; border-radius: 4px; margin-bottom: 8px; background: white; align-items: center;\";\n  \n  const buttonWrapper = document.createElement(\"div\");\n  buttonWrapper.style.cssText = \"position: relative; width: 100%;\";\n  \n  const dropdownButton = document.createElement(\"button\");\n  dropdownButton.textContent = \"Select types of gap...\";\n  dropdownButton.style.cssText = \"width: 100%; padding: 8px 12px; text-align: left; background: white; border: 1px solid #ccc; border-radius: 4px; cursor: pointer; color: #333; display: block;\";\n  \n  const dropdownMenu = document.createElement(\"div\");\n  dropdownMenu.style.cssText = \"display: none; position: fixed; max-height: 200px; overflow-y: auto; background: white; border: 1px solid #ccc; border-radius: 4px; z-index: 1000; box-shadow: 0 2px 8px rgba(0,0,0,0.1); box-sizing: border-box;\";\n  \n  let selected = [];\n  \n  const updateView = () =&gt; {\n    selectedContainer.innerHTML = \"\";\n    selected.forEach(item =&gt; {\n      const tag = document.createElement(\"span\");\n      tag.style.cssText = \"display: inline-flex; align-items: center; gap: 4px; padding: 4px 8px; background: #e3f2fd; border-radius: 3px; font-size: 13px; color: #333;\";\n      tag.innerHTML = `${item} &lt;span style=\"cursor: pointer; font-weight: bold;\"&gt;×&lt;/span&gt;`;\n      tag.querySelector(\"span\").onclick = () =&gt; {\n        selected = selected.filter(s =&gt; s !== item);\n        updateView();\n        container.value = selected;\n        container.dispatchEvent(new CustomEvent(\"input\"));\n      };\n      selectedContainer.appendChild(tag);\n    });\n    \n    if (selected.length === 0) {\n      const placeholder = document.createElement(\"span\");\n      placeholder.textContent = \"No gap types selected (showing all data)\";\n      placeholder.style.cssText = \"color: #999; font-style: italic;\";\n      selectedContainer.appendChild(placeholder);\n    }\n  };\n  \n  options.forEach(option =&gt; {\n    const item = document.createElement(\"div\");\n    item.textContent = option;\n    item.style.cssText = \"padding: 8px 12px; cursor: pointer; user-select: none; color: #333;\";\n    item.onmouseenter = () =&gt; item.style.background = \"#f0f0f0\";\n    item.onmouseleave = () =&gt; item.style.background = selected.includes(option) ? \"#e3f2fd\" : \"white\";\n    item.onclick = () =&gt; {\n      if (selected.includes(option)) {\n        selected = selected.filter(s =&gt; s !== option);\n      } else {\n        selected.push(option);\n      }\n      updateView();\n      container.value = selected;\n      container.dispatchEvent(new CustomEvent(\"input\"));\n    };\n    dropdownMenu.appendChild(item);\n  });\n  \n  dropdownButton.onclick = () =&gt; {\n    const isVisible = dropdownMenu.style.display === \"block\";\n    if (isVisible) {\n      dropdownMenu.style.display = \"none\";\n    } else {\n      const rect = dropdownButton.getBoundingClientRect();\n      dropdownMenu.style.top = `${rect.bottom + 2}px`;\n      dropdownMenu.style.left = `${rect.left}px`;\n      dropdownMenu.style.width = `${rect.width}px`;\n      dropdownMenu.style.display = \"block\";\n    }\n  };\n  \n  document.addEventListener(\"click\", (e) =&gt; {\n    if (!container.contains(e.target) && !dropdownMenu.contains(e.target)) {\n      dropdownMenu.style.display = \"none\";\n    }\n  });\n  \n  container.appendChild(label);\n  container.appendChild(selectedContainer);\n  buttonWrapper.appendChild(dropdownButton);\n  container.appendChild(buttonWrapper);\n  document.body.appendChild(dropdownMenu);\n  \n  updateView();\n  container.value = selected;\n  return container;\n}\n\n\n\n\n\n\n\n\n\nviewof topics = {\n  const options = topics_opts.map(d =&gt; d[Object.keys(d)[0]]);\n  const container = document.createElement(\"div\");\n  container.classList.add(\"filter-name\");\n  \n  const label = document.createElement(\"label\");\n  label.textContent = \"Topics:\";\n  label.style.cssText = \"display: block; margin-bottom: 4px; font-weight: 500;\";\n  \n  const selectedContainer = document.createElement(\"div\");\n  selectedContainer.style.cssText = \"display: flex; flex-wrap: wrap; gap: 6px; min-height: 38px; padding: 6px; border: 1px solid #ccc; border-radius: 4px; margin-bottom: 8px; background: white; align-items: center;\";\n  \n  const buttonWrapper = document.createElement(\"div\");\n  buttonWrapper.style.cssText = \"position: relative; width: 100%;\";\n  \n  const dropdownButton = document.createElement(\"button\");\n  dropdownButton.textContent = \"Select topics...\";\n  dropdownButton.style.cssText = \"width: 100%; padding: 8px 12px; text-align: left; background: white; border: 1px solid #ccc; border-radius: 4px; cursor: pointer; color: #333; display: block;\";\n  \n  const dropdownMenu = document.createElement(\"div\");\n  dropdownMenu.style.cssText = \"display: none; position: fixed; max-height: 200px; overflow-y: auto; background: white; border: 1px solid #ccc; border-radius: 4px; z-index: 1000; box-shadow: 0 2px 8px rgba(0,0,0,0.1); box-sizing: border-box;\";\n  \n  let selected = [];\n  \n  const updateView = () =&gt; {\n    selectedContainer.innerHTML = \"\";\n    selected.forEach(item =&gt; {\n      const tag = document.createElement(\"span\");\n      tag.style.cssText = \"display: inline-flex; align-items: center; gap: 4px; padding: 4px 8px; background: #e3f2fd; border-radius: 3px; font-size: 13px; color: #333;\";\n      tag.innerHTML = `${item} &lt;span style=\"cursor: pointer; font-weight: bold;\"&gt;×&lt;/span&gt;`;\n      tag.querySelector(\"span\").onclick = () =&gt; {\n        selected = selected.filter(s =&gt; s !== item);\n        updateView();\n        container.value = selected;\n        container.dispatchEvent(new CustomEvent(\"input\"));\n      };\n      selectedContainer.appendChild(tag);\n    });\n    \n    if (selected.length === 0) {\n      const placeholder = document.createElement(\"span\");\n      placeholder.textContent = \"No topics selected (showing all data)\";\n      placeholder.style.cssText = \"color: #999; font-style: italic;\";\n      selectedContainer.appendChild(placeholder);\n    }\n  };\n  \n  options.forEach(option =&gt; {\n    const item = document.createElement(\"div\");\n    item.textContent = option;\n    item.style.cssText = \"padding: 8px 12px; cursor: pointer; user-select: none; color: #333;\";\n    item.onmouseenter = () =&gt; item.style.background = \"#f0f0f0\";\n    item.onmouseleave = () =&gt; item.style.background = selected.includes(option) ? \"#e3f2fd\" : \"white\";\n    item.onclick = () =&gt; {\n      if (selected.includes(option)) {\n        selected = selected.filter(s =&gt; s !== option);\n      } else {\n        selected.push(option);\n      }\n      updateView();\n      container.value = selected;\n      container.dispatchEvent(new CustomEvent(\"input\"));\n    };\n    dropdownMenu.appendChild(item);\n  });\n  \n  dropdownButton.onclick = () =&gt; {\n    const isVisible = dropdownMenu.style.display === \"block\";\n    if (isVisible) {\n      dropdownMenu.style.display = \"none\";\n    } else {\n      const rect = dropdownButton.getBoundingClientRect();\n      dropdownMenu.style.top = `${rect.bottom + 2}px`;\n      dropdownMenu.style.left = `${rect.left}px`;\n      dropdownMenu.style.width = `${rect.width}px`;\n      dropdownMenu.style.display = \"block\";\n    }\n  };\n  \n  document.addEventListener(\"click\", (e) =&gt; {\n    if (!container.contains(e.target) && !dropdownMenu.contains(e.target)) {\n      dropdownMenu.style.display = \"none\";\n    }\n  });\n  \n  container.appendChild(label);\n  container.appendChild(selectedContainer);\n  buttonWrapper.appendChild(dropdownButton);\n  container.appendChild(buttonWrapper);\n  document.body.appendChild(dropdownMenu);\n  \n  updateView();\n  container.value = selected;\n  return container;\n}\n\n\n\n\n\n\n\n\n\nData gapsReports\n\n\n\nmodal = html`&lt;div id=\"modal-overlay\"&gt;\n  &lt;div id=\"modal-content\"&gt;\n    &lt;button id=\"modal-close\"&gt;X&lt;/button&gt;\n    &lt;div id=\"modal-body\"&gt;&lt;/div&gt;\n  &lt;/div&gt;\n&lt;/div&gt;`\n\n// Helper functions for modal\nfunction showModal(rowData) {\n  const overlay = document.getElementById('modal-overlay');\n  const modalBody = document.getElementById('modal-body');\n  \n  modalBody.innerHTML = `\n    &lt;h2&gt;${rowData.Name}&lt;/h2&gt;\n    \n    &lt;div style=\"margin-bottom: 1rem;\"&gt;\n      &lt;strong&gt;Headline finding:&lt;/strong&gt; ${rowData.Headline || 'No description available'}\n    &lt;/div&gt;\n    \n    &lt;div style=\"margin-bottom: 1rem;\"&gt;\n      &lt;strong&gt;Research Questions:&lt;/strong&gt; ${rowData.Questions || 'No description available'}\n    &lt;/div&gt;\n    \n    &lt;div style=\"margin-bottom: 1rem;\"&gt;\n      &lt;strong&gt;Impact:&lt;/strong&gt; ${rowData.Impact || 'No description available'}\n    &lt;/div&gt;\n    \n    &lt;div style=\"margin-bottom: 1rem;\"&gt;\n      &lt;strong&gt;Sources:&lt;/strong&gt; ${rowData.Sources || 'No description available'}\n    &lt;/div&gt;\n    \n    &lt;div style=\"margin-bottom: 1rem;\"&gt;\n      &lt;strong&gt;Topics:&lt;/strong&gt; ${rowData.Topics_Text || 'No description available'}\n    &lt;/div&gt;\n    \n    &lt;div style=\"margin-bottom: 1rem;\"&gt;\n      &lt;strong&gt;Types of Gap:&lt;/strong&gt; ${rowData.Type || 'No description available'}\n    &lt;/div&gt;\n    \n    &lt;div style=\"background: #f5f5f5; padding: 1rem; border-radius: 4px;\"&gt;\n      &lt;strong&gt;${rowData.Report}&lt;/strong&gt;\n      &lt;p&gt;${rowData.Author || 'No author available'} (${rowData.Date}) &lt;/p&gt;\n      &lt;a href=${rowData.URL} target=_blank&gt;View Report&lt;/a&gt;\n    &lt;/div&gt;\n    \n  `;\n  \n  overlay.style.display = 'flex';\n}\n\nfunction hideModal() {\n  const overlay = document.getElementById('modal-overlay');\n  if (overlay) overlay.style.display = 'none';\n}\n\n// Set up close handlers after modal is rendered\n{\n  setTimeout(() =&gt; {\n    const closeBtn = document.getElementById('modal-close');\n    const overlay = document.getElementById('modal-overlay');\n    \n    if (closeBtn) {\n      closeBtn.addEventListener('click', hideModal);\n    }\n    \n    if (overlay) {\n      overlay.addEventListener('click', (e) =&gt; {\n        if (e.target.id === 'modal-overlay') hideModal();\n      });\n    }\n  }, 100);\n}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nviewof gaps_table = Inputs.table(filtered_gaps, {\n  columns: [\"Name\", \"Type\", \"Sources\", \"Topics\", \"Link\"], \n  header: {\n    Type: \"Type of Data Gap\",\n  },\n  sort: false,\n  format: {\n    Link: (testValue, row_index) =&gt; {\n      const div = document.createElement('div');\n      div.innerHTML = testValue;\n      \n      const button = div.querySelector('button');\n      if (button) {\n        button.addEventListener('click', () =&gt; {\n          const rowData = filtered_gaps[row_index];\n          showModal(rowData);\n        });\n      }\n      \n      return div;\n    }\n  },\n  rows: 20\n})\n\n\n\n\n\n\n\n\n\n\n\nmodal2 = html`&lt;div id=\"modal-overlay2\"&gt;\n  &lt;div id=\"modal-content2\"&gt;\n    &lt;button id=\"modal-close2\"&gt;X&lt;/button&gt;\n    &lt;div id=\"modal-body2\"&gt;&lt;/div&gt;\n  &lt;/div&gt;\n&lt;/div&gt;`\n\n// Helper functions for modal\nfunction showReportsModal(rowData) {\n  const overlay2 = document.getElementById('modal-overlay2');\n  const modalBody2 = document.getElementById('modal-body2');\n  \n  modalBody2.innerHTML = `\n    &lt;h2&gt;${rowData.Title}&lt;/h2&gt;\n    \n    &lt;div style=\"margin-bottom: 1rem;\"&gt;\n      ${rowData.Author} (${rowData.Date})\n    &lt;/div&gt;\n\n    &lt;div style=\"background: #f5f5f5; padding: 1rem; border-radius: 4px;\"&gt;\n      ${rowData.GapText}\n    &lt;/div&gt;\n\n    \n  `;\n  \n  overlay2.style.display = 'flex';\n}\n\nfunction hideReportsModal() {\n  const overlay2 = document.getElementById('modal-overlay2');\n  if (overlay2) overlay2.style.display = 'none';\n}\n\n// Set up close handlers after modal is rendered\n{\n  setTimeout(() =&gt; {\n    const closeBtn2 = document.getElementById('modal-close2');\n    const overlay2 = document.getElementById('modal-overlay2');\n    \n    if (closeBtn2) {\n      closeBtn2.addEventListener('click', hideReportsModal);\n    }\n    \n    if (overlay2) {\n      overlay2.addEventListener('click', (e) =&gt; {\n        if (e.target.id === 'modal-overlay2') hideReportsModal();\n      });\n    }\n  }, 100);\n}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nviewof reports_table = Inputs.table(filtered_reports, {\n  columns: [\"Title\", \"Author\", \"Date\", \"URL\", \"Link\"], \n  sort: false,\n  format: {\n    Link: (testValue, row_index) =&gt; {\n      const div = document.createElement('div');\n      div.innerHTML = testValue;\n      \n      const button = div.querySelector('button');\n      if (button) {\n        button.addEventListener('click', () =&gt; {\n          const rowData = filtered_reports[row_index];\n          showReportsModal(rowData);\n        });\n      }\n      \n      return div;\n    },\n    URL: Test =&gt; {\n      const div = document.createElement('div');\n      div.innerHTML = Test;\n      return div;\n    }\n  },\n  rows: 20\n})\n\n\n\n\n\n\n\n\n\n\n\ndata_gaps = FileAttachment(\"data/data_gaps_table.csv\").csv({ typed: true })\ndata_reports = FileAttachment(\"data/reports_table.csv\")\n  .csv({ typed: true })\n  .then(data =&gt; data.map(d =&gt; ({ ...d, Date: String(d.Date) })))\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nsources_opts = FileAttachment(\"data/sources_opts.csv\").csv({ typed: true })\ntypes_opts = FileAttachment(\"data/types_opts.csv\").csv({ typed: true })\ntopics_opts = FileAttachment(\"data/topics_opts.csv\").csv({ typed: true })\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nfiltered_gaps = data_gaps.filter(function(x) {\n  if (sources.length &gt; 0 && !sources.some(s =&gt; x.Sources.includes(s))) return false;\n  if (types.length &gt; 0 && !types.some(t =&gt; x.Type.includes(t))) return false;\n  if (topics.length &gt; 0 && !topics.some(topic =&gt; x.Topics.includes(topic))) return false;\n  return true;\n})\nfiltered_reports = data_reports.filter(function(x) {\n  if (sources.length &gt; 0 && !sources.some(s =&gt; x.Sources.includes(s))) return false;\n  if (types.length &gt; 0 && !types.some(t =&gt; x.Type.includes(t))) return false;\n  if (topics.length &gt; 0 && !topics.some(topic =&gt; x.Topics.includes(topic))) return false;\n  return true;\n})"
  },
  {
    "objectID": "about.html",
    "href": "about.html",
    "title": "About",
    "section": "",
    "text": "This data explorer has been produced as part of the Royal Statistical Society and Centre for Public Data’s ongoing research into poverty data gaps in the UK. It draws on desk research that looked through &gt;300 publications from civil society organisations that were flagged as having some relevance to poverty research This document has fed into the findings of our interim summary report for our project, available here, which outlines the methodology used for extracting data gaps from publications.\nAn overview of the project’s aims is available on the RSS website. Final outputs from this project are expected in March 2026. Please note that anything in this document is subject to change as the project progresses. Further additions, corrections, and expansions are therefore likely. We welcome corrections and contributions from interested readers.\nIf you have any comments or queries, or if you would like to contribute to our research by highlighting poverty data gaps in your research area that you believe we should be aware of, please contact Dakota Langhals (d.langhals@rss.org.uk), RSS Policy Researcher, or the RSS policy inbox (policy@rss.org.uk).\n\n\n\n\n\n\nNoteTypes of data gaps\n\n\n\n\n\n\ntypes_opts = FileAttachment(\"data/types_opts.csv\").csv({ typed: true })\n\n\n\n\n\n\n\n\nInputs.table(types_opts, {\n  rows: 20\n})\n\n\n\n\n\n\n\n\n\n\nAdd a new data gap"
  },
  {
    "objectID": "OJS/filters.html",
    "href": "OJS/filters.html",
    "title": "Poverty Data Gaps",
    "section": "",
    "text": "viewof sources = {\n  const options = sources_opts.map(d =&gt; d[Object.keys(d)[0]]);\n  const container = document.createElement(\"div\");\n  container.classList.add(\"filter-name\");\n  \n  const label = document.createElement(\"label\");\n  label.textContent = \"Data sources:\";\n  label.style.cssText = \"display: block; margin-bottom: 4px; font-weight: 500;\";\n  \n  const selectedContainer = document.createElement(\"div\");\n  selectedContainer.style.cssText = \"display: flex; flex-wrap: wrap; gap: 6px; min-height: 38px; padding: 6px; border: 1px solid #ccc; border-radius: 4px; margin-bottom: 8px; background: white; align-items: center;\";\n  \n  const buttonWrapper = document.createElement(\"div\");\n  buttonWrapper.style.cssText = \"position: relative; width: 100%;\";\n  \n  const dropdownButton = document.createElement(\"button\");\n  dropdownButton.textContent = \"Select sources...\";\n  dropdownButton.style.cssText = \"width: 100%; padding: 8px 12px; text-align: left; background: white; border: 1px solid #ccc; border-radius: 4px; cursor: pointer; color: #333; display: block;\";\n  \n  const dropdownMenu = document.createElement(\"div\");\n  dropdownMenu.style.cssText = \"display: none; position: fixed; max-height: 200px; overflow-y: auto; background: white; border: 1px solid #ccc; border-radius: 4px; z-index: 1000; box-shadow: 0 2px 8px rgba(0,0,0,0.1); box-sizing: border-box;\";\n  \n  let selected = [];\n  \n  const updateView = () =&gt; {\n    selectedContainer.innerHTML = \"\";\n    selected.forEach(item =&gt; {\n      const tag = document.createElement(\"span\");\n      tag.style.cssText = \"display: inline-flex; align-items: center; gap: 4px; padding: 4px 8px; background: #e3f2fd; border-radius: 3px; font-size: 13px; color: #333;\";\n      tag.innerHTML = `${item} &lt;span style=\"cursor: pointer; font-weight: bold;\"&gt;×&lt;/span&gt;`;\n      tag.querySelector(\"span\").onclick = () =&gt; {\n        selected = selected.filter(s =&gt; s !== item);\n        updateView();\n        container.value = selected;\n        container.dispatchEvent(new CustomEvent(\"input\"));\n      };\n      selectedContainer.appendChild(tag);\n    });\n    \n    if (selected.length === 0) {\n      const placeholder = document.createElement(\"span\");\n      placeholder.textContent = \"No sources selected (showing all data)\";\n      placeholder.style.cssText = \"color: #999; font-style: italic;\";\n      selectedContainer.appendChild(placeholder);\n    }\n  };\n  \n  options.forEach(option =&gt; {\n    const item = document.createElement(\"div\");\n    item.textContent = option;\n    item.style.cssText = \"padding: 8px 12px; cursor: pointer; user-select: none; color: #333;\";\n    item.onmouseenter = () =&gt; item.style.background = \"#f0f0f0\";\n    item.onmouseleave = () =&gt; item.style.background = selected.includes(option) ? \"#e3f2fd\" : \"white\";\n    item.onclick = () =&gt; {\n      if (selected.includes(option)) {\n        selected = selected.filter(s =&gt; s !== option);\n      } else {\n        selected.push(option);\n      }\n      updateView();\n      container.value = selected;\n      container.dispatchEvent(new CustomEvent(\"input\"));\n    };\n    dropdownMenu.appendChild(item);\n  });\n  \n  dropdownButton.onclick = () =&gt; {\n    const isVisible = dropdownMenu.style.display === \"block\";\n    if (isVisible) {\n      dropdownMenu.style.display = \"none\";\n    } else {\n      const rect = dropdownButton.getBoundingClientRect();\n      dropdownMenu.style.top = `${rect.bottom + 2}px`;\n      dropdownMenu.style.left = `${rect.left}px`;\n      dropdownMenu.style.width = `${rect.width}px`;\n      dropdownMenu.style.display = \"block\";\n    }\n  };\n  \n  document.addEventListener(\"click\", (e) =&gt; {\n    if (!container.contains(e.target) && !dropdownMenu.contains(e.target)) {\n      dropdownMenu.style.display = \"none\";\n    }\n  });\n  \n  container.appendChild(label);\n  container.appendChild(selectedContainer);\n  buttonWrapper.appendChild(dropdownButton);\n  container.appendChild(buttonWrapper);\n  document.body.appendChild(dropdownMenu);\n  \n  updateView();\n  container.value = selected;\n  return container;\n}\n\n\n\n\n\n\n\n\n\nviewof types = {\n  const options = types_opts.map(d =&gt; d[Object.keys(d)[0]]);\n  const container = document.createElement(\"div\");\n  container.classList.add(\"filter-name\");\n  \n  const label = document.createElement(\"label\");\n  label.textContent = \"Type of data gap:\";\n  label.style.cssText = \"display: block; margin-bottom: 4px; font-weight: 500;\";\n  \n  const selectedContainer = document.createElement(\"div\");\n  selectedContainer.style.cssText = \"display: flex; flex-wrap: wrap; gap: 6px; min-height: 38px; padding: 6px; border: 1px solid #ccc; border-radius: 4px; margin-bottom: 8px; background: white; align-items: center;\";\n  \n  const buttonWrapper = document.createElement(\"div\");\n  buttonWrapper.style.cssText = \"position: relative; width: 100%;\";\n  \n  const dropdownButton = document.createElement(\"button\");\n  dropdownButton.textContent = \"Select types of gap...\";\n  dropdownButton.style.cssText = \"width: 100%; padding: 8px 12px; text-align: left; background: white; border: 1px solid #ccc; border-radius: 4px; cursor: pointer; color: #333; display: block;\";\n  \n  const dropdownMenu = document.createElement(\"div\");\n  dropdownMenu.style.cssText = \"display: none; position: fixed; max-height: 200px; overflow-y: auto; background: white; border: 1px solid #ccc; border-radius: 4px; z-index: 1000; box-shadow: 0 2px 8px rgba(0,0,0,0.1); box-sizing: border-box;\";\n  \n  let selected = [];\n  \n  const updateView = () =&gt; {\n    selectedContainer.innerHTML = \"\";\n    selected.forEach(item =&gt; {\n      const tag = document.createElement(\"span\");\n      tag.style.cssText = \"display: inline-flex; align-items: center; gap: 4px; padding: 4px 8px; background: #e3f2fd; border-radius: 3px; font-size: 13px; color: #333;\";\n      tag.innerHTML = `${item} &lt;span style=\"cursor: pointer; font-weight: bold;\"&gt;×&lt;/span&gt;`;\n      tag.querySelector(\"span\").onclick = () =&gt; {\n        selected = selected.filter(s =&gt; s !== item);\n        updateView();\n        container.value = selected;\n        container.dispatchEvent(new CustomEvent(\"input\"));\n      };\n      selectedContainer.appendChild(tag);\n    });\n    \n    if (selected.length === 0) {\n      const placeholder = document.createElement(\"span\");\n      placeholder.textContent = \"No gap types selected (showing all data)\";\n      placeholder.style.cssText = \"color: #999; font-style: italic;\";\n      selectedContainer.appendChild(placeholder);\n    }\n  };\n  \n  options.forEach(option =&gt; {\n    const item = document.createElement(\"div\");\n    item.textContent = option;\n    item.style.cssText = \"padding: 8px 12px; cursor: pointer; user-select: none; color: #333;\";\n    item.onmouseenter = () =&gt; item.style.background = \"#f0f0f0\";\n    item.onmouseleave = () =&gt; item.style.background = selected.includes(option) ? \"#e3f2fd\" : \"white\";\n    item.onclick = () =&gt; {\n      if (selected.includes(option)) {\n        selected = selected.filter(s =&gt; s !== option);\n      } else {\n        selected.push(option);\n      }\n      updateView();\n      container.value = selected;\n      container.dispatchEvent(new CustomEvent(\"input\"));\n    };\n    dropdownMenu.appendChild(item);\n  });\n  \n  dropdownButton.onclick = () =&gt; {\n    const isVisible = dropdownMenu.style.display === \"block\";\n    if (isVisible) {\n      dropdownMenu.style.display = \"none\";\n    } else {\n      const rect = dropdownButton.getBoundingClientRect();\n      dropdownMenu.style.top = `${rect.bottom + 2}px`;\n      dropdownMenu.style.left = `${rect.left}px`;\n      dropdownMenu.style.width = `${rect.width}px`;\n      dropdownMenu.style.display = \"block\";\n    }\n  };\n  \n  document.addEventListener(\"click\", (e) =&gt; {\n    if (!container.contains(e.target) && !dropdownMenu.contains(e.target)) {\n      dropdownMenu.style.display = \"none\";\n    }\n  });\n  \n  container.appendChild(label);\n  container.appendChild(selectedContainer);\n  buttonWrapper.appendChild(dropdownButton);\n  container.appendChild(buttonWrapper);\n  document.body.appendChild(dropdownMenu);\n  \n  updateView();\n  container.value = selected;\n  return container;\n}\n\n\n\n\n\n\n\n\n\nviewof topics = {\n  const options = topics_opts.map(d =&gt; d[Object.keys(d)[0]]);\n  const container = document.createElement(\"div\");\n  container.classList.add(\"filter-name\");\n  \n  const label = document.createElement(\"label\");\n  label.textContent = \"Topics:\";\n  label.style.cssText = \"display: block; margin-bottom: 4px; font-weight: 500;\";\n  \n  const selectedContainer = document.createElement(\"div\");\n  selectedContainer.style.cssText = \"display: flex; flex-wrap: wrap; gap: 6px; min-height: 38px; padding: 6px; border: 1px solid #ccc; border-radius: 4px; margin-bottom: 8px; background: white; align-items: center;\";\n  \n  const buttonWrapper = document.createElement(\"div\");\n  buttonWrapper.style.cssText = \"position: relative; width: 100%;\";\n  \n  const dropdownButton = document.createElement(\"button\");\n  dropdownButton.textContent = \"Select topics...\";\n  dropdownButton.style.cssText = \"width: 100%; padding: 8px 12px; text-align: left; background: white; border: 1px solid #ccc; border-radius: 4px; cursor: pointer; color: #333; display: block;\";\n  \n  const dropdownMenu = document.createElement(\"div\");\n  dropdownMenu.style.cssText = \"display: none; position: fixed; max-height: 200px; overflow-y: auto; background: white; border: 1px solid #ccc; border-radius: 4px; z-index: 1000; box-shadow: 0 2px 8px rgba(0,0,0,0.1); box-sizing: border-box;\";\n  \n  let selected = [];\n  \n  const updateView = () =&gt; {\n    selectedContainer.innerHTML = \"\";\n    selected.forEach(item =&gt; {\n      const tag = document.createElement(\"span\");\n      tag.style.cssText = \"display: inline-flex; align-items: center; gap: 4px; padding: 4px 8px; background: #e3f2fd; border-radius: 3px; font-size: 13px; color: #333;\";\n      tag.innerHTML = `${item} &lt;span style=\"cursor: pointer; font-weight: bold;\"&gt;×&lt;/span&gt;`;\n      tag.querySelector(\"span\").onclick = () =&gt; {\n        selected = selected.filter(s =&gt; s !== item);\n        updateView();\n        container.value = selected;\n        container.dispatchEvent(new CustomEvent(\"input\"));\n      };\n      selectedContainer.appendChild(tag);\n    });\n    \n    if (selected.length === 0) {\n      const placeholder = document.createElement(\"span\");\n      placeholder.textContent = \"No topics selected (showing all data)\";\n      placeholder.style.cssText = \"color: #999; font-style: italic;\";\n      selectedContainer.appendChild(placeholder);\n    }\n  };\n  \n  options.forEach(option =&gt; {\n    const item = document.createElement(\"div\");\n    item.textContent = option;\n    item.style.cssText = \"padding: 8px 12px; cursor: pointer; user-select: none; color: #333;\";\n    item.onmouseenter = () =&gt; item.style.background = \"#f0f0f0\";\n    item.onmouseleave = () =&gt; item.style.background = selected.includes(option) ? \"#e3f2fd\" : \"white\";\n    item.onclick = () =&gt; {\n      if (selected.includes(option)) {\n        selected = selected.filter(s =&gt; s !== option);\n      } else {\n        selected.push(option);\n      }\n      updateView();\n      container.value = selected;\n      container.dispatchEvent(new CustomEvent(\"input\"));\n    };\n    dropdownMenu.appendChild(item);\n  });\n  \n  dropdownButton.onclick = () =&gt; {\n    const isVisible = dropdownMenu.style.display === \"block\";\n    if (isVisible) {\n      dropdownMenu.style.display = \"none\";\n    } else {\n      const rect = dropdownButton.getBoundingClientRect();\n      dropdownMenu.style.top = `${rect.bottom + 2}px`;\n      dropdownMenu.style.left = `${rect.left}px`;\n      dropdownMenu.style.width = `${rect.width}px`;\n      dropdownMenu.style.display = \"block\";\n    }\n  };\n  \n  document.addEventListener(\"click\", (e) =&gt; {\n    if (!container.contains(e.target) && !dropdownMenu.contains(e.target)) {\n      dropdownMenu.style.display = \"none\";\n    }\n  });\n  \n  container.appendChild(label);\n  container.appendChild(selectedContainer);\n  buttonWrapper.appendChild(dropdownButton);\n  container.appendChild(buttonWrapper);\n  document.body.appendChild(dropdownMenu);\n  \n  updateView();\n  container.value = selected;\n  return container;\n}"
  }
]